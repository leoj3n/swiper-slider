<!--
`swiper-slider` is an image slider.
Example:

    <swiper-slider></swiper-slider>

@element swiper-slider
@status unstable
-->

<link href="../polymer/polymer.html" rel="import">

<script src="../swiper/dist/js/swiper.min.js"></script>

<polymer-element name="swiper-slider">

  <template attributes="next prev scrollbar pagination">

    <link href="../swiper/dist/css/swiper.css" rel="stylesheet">

    <style>

      :host { }

      ::content * { }

      .swiper-container {
        width: 500px;
        height: 300px;
        margin: 20px auto;
      }

      .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;

        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      }

      /*
       * @TODO broken data:image inlines
       * See https://github.com/Polymer/polymer/issues/1276
       */

    </style>

    <div class="swiper-container" id="swiper">
      <div class="swiper-wrapper" id="wrapper">
        <content id="content"></content>
      </div>
    </div>

  </template>

  <script>
    Polymer({
      ready: function() {
        this.nextEl = document.createElement('div');
        this.prevEl = document.createElement('div');
        this.scrollbarEl = document.createElement('div'),
        this.paginationEl = document.createElement('div');
        this.nextEl.className = 'swiper-button-next';
        this.prevEl.className = 'swiper-button-prev';
        this.scrollbarEl.className = 'swiper-scrollbar';
        this.paginationEl.className = 'swiper-pagination';
      },
      domReady: function() {
        var swiper = new Swiper( this.$.swiper, {
          nextButton: this.nextEl,
          prevButton: this.prevEl,
          spaceBetween: 30
        });
      },
      attached: function() {
        var nodes = this.$.content.getDistributedNodes(),
          slides = '',
          opts = '';

        for ( var i = 0; i < nodes.length; i++ ) {
          if ( 'innerHTML' in nodes[ i ] ) {
            slides += '<div class="swiper-slide">' + nodes[ i ].innerHTML + '</div>';
          }
        }

        this.injectBoundHTML( slides, this.$.wrapper );

        if ( typeof this.getAttribute('next') !== 'object' ) {
          this.$.swiper.appendChild( this.nextEl );
        }
        if ( typeof this.getAttribute('prev') !== 'object' ) {
          this.$.swiper.appendChild( this.prevEl );
        }
        if ( typeof this.getAttribute('scrollbar') !== 'object' ) {
          this.$.swiper.appendChild(this.scrollbarEl);
        }
        if ( typeof this.getAttribute('pagination') !== 'object' ) {
          this.$.swiper.appendChild(this.paginationEl);
        }
      }
    });
  </script>

</polymer-element>

